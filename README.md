# Лабораторная работа 2. STATEFUL сервис для RBDMS

## Цель
Получение практических навыков в построении сервисов, работающих с реляционными данными

## Задание
Разработать приложение осуществляющее хранение данных о пользователях в реляционной СУБД. Для выявленных в предыдущем задании вызовов между сервисами создайте REST интерфейс.

Выполнены следующие условия:

1. Данные хранятся в СУБД PostgreSQL;
2. Создана таблица для сущности, соответствующей пользователю. А также бонусом сделана небольшая пробная таблица, хранящая начальную и конечную точки маршрута;
3. Интерфейс предоставляется со стилем REST;
4. API специфицирован в OpenAPI 3.0 - хранится в [index.yaml](https://github.com/MimkaKek/hl_mai_lab_01/blob/master/index.yaml);
5. Создан скрипт [init_psql.py](https://github.com/MimkaKek/hl_mai_lab_01/blob/master/init_psql.py) на языке Python для инициализации указанных таблиц и наполнения тестовыми данными. Необходимые зависимости указаны в requirements.txt;
6. Реализован поиск по маске имени/фамилии, а также стандартные CRUD операции;
7. В сущности пользователя хранятся логин и пароль, пароль хэшируется перед сохранением в БД.

## Комментарий

Вроде как разрешено в качестве основы взять пример Дзюбы. Понадобилось дополнительно разбираться в библиотекой Poco, чтобы поставить её себе для удобства. 

Dockerfile ([release](https://github.com/MimkaKek/hl_mai_lab_01/blob/master/my_service/release)) изначально не был адаптирован под PostgreSQL, поэтому был изменён. Для отладки был создан дополнительый Dockerfile ([debug](https://github.com/MimkaKek/hl_mai_lab_01/blob/master/my_service/debug)), который просто позволял контейнеру бесконечно "висеть" в sleep, позволяя свободно проводить манипуляции внутри него.

По ошибке также были заготовлены фрагменты кода на C++ для взаимодействия с различными сущностями (папка [database](https://github.com/MimkaKek/hl_mai_lab_01/tree/master/database)), запланированными ещё на прошлой лабораторной работе. Но веб-сервис активно использует лишь две сущности - пользователь и маршрут. Код, осуществляющий взаимодействие с ними лежит в папке [web_server/handlers](https://github.com/MimkaKek/hl_mai_lab_01/tree/master/web_server/handlers). Надеюсь, дальше оно найдёт применение :)

Также не ясно, как можно прописать API по спецификации OpenAPI 3.0 при помощи Postman. Сколько не гуглил - натыкался лишь на различные утилиты в Github, которые активно используют Node.js. Возможно, проще было бы применить [генератор](https://github.com/OpenAPITools/openapi-generator/tree/master), но решил сделать это вручную следуя аналогии. Но в следующий раз это будет сделано уже при помощи генератора.
